 {% extends 'base.html.twig' %}

{% block title %}Message{% endblock %}

{% block body %}
    <a href="{{path('message_discussion', {'id' : app.user.id})}}" class="button-comeback"><i class="fas fa-arrow-left"></i></a>
<div class="container">

 
    <div class="container">
    <h2 class="text-center my-4">Discussion avec {{contact.firstName}}</h2>
        <div class="box-message" id="box-message">
        {% for message in messageReceive %}

                {% if message.sender.id == app.user.id %}
                    <div class="row sender-row display-lign font-controll-message-name">
                {% else %}
                    <div class="row receiver-row font-controll-message-name">
                {% endif %}
                   {% if message.sender.id == app.user.id %}
                    
                     <div class="col-3 d-flex justify-content-end align-items-center">
                    {% else %}
                     <div class="col-2 d-flex justify-content-start align-items-center">
                    {% endif %}
                            <img class="profile-picture-message-send d-flex justify-content-center align-items-center" src="{{asset('assets/uploads/profilePicture/') ~ message.sender.profile_picture}}"/>
                            <div class="name-user">{{message.sender.firstName}}</div>
                        </div>
                         {% if message.sender.id == app.user.id %}
                        <div class="col-7 d-flex justify-content-end align-items-center font-controll-message">
                        {% else %}
                        <div class="col-7 d-flex justify-content-start align-items-center font-controll-message">
                        {% endif %}
                            <div>{{message.content|striptags('<a>')|raw }}</div>
                           
                          
                        </div>
                        <div class="col-2"></div>
                    </div>
                        {% if message.sender.id == app.user.id %}
                        <div class="d-flex flex-row-reverse hour-send">{{message.sendAt|date("d M H:i")}}</div>

                        {% else %}
                        <div class="d-flex  hour-send">{{message.sendAt|date("d M H:i")}}</div>
                        {% endif %}
            {% endfor %}
        </div>
    </div>
    <hr>
            <div class="container">
                {{ include('message/_form.html.twig') }}
        </div>
</div>


{% endblock %}